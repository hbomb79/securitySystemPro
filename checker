currentVersion = 2

local function downloadFiles(url, path)
for i = 1, 3 do
  local response = http.get(url)
  if response then
   local data = response.readAll()
   if path then
        local f = io.open(path, "w")
        f:write(data)
        f:close()
   end
   return true
  end
end
return false
end

function checkForUpdates(updateUrl)
for i = 1, 3 do
  local response = http.get(updateUrl)
  if response then
   local data = response.readAll()
   if data ~= currentVersion then
        print("There's an available update... Attempting Update.")
        sleep(1)
        if not fs.exists("/installer") then
         downloadFiles("https://raw.github.com/hbomb79/securitySystemPro/master/installer", "/installer")
        end
        shell.run("/installer")
   end
  end
end
end
checkForUpdates("http://raw.github.com/hbomb79/securitySystemPro/master/version")
